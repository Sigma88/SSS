@Kopernicus:HAS[#RealisticAtmospheres[True]]
{
  @Body,*
  {
    @Atmosphere
    {
      @pressureCurve:HAS[#pressure[>0],#scaleHeight[>0]]
      {
      	@pressure *= 101.325
      	@scaleHeight *= 6375
      	%altitude = 0
      	%tangent = #-$pressure$
      	@tangent /= #$scaleHeight$
      }
      @pressureCurve:HAS[#pressure[>0.002],#scaleHeight[>0]]
      {
      	key = #$altitude$ $pressure$ $tangent$ $tangent$
      	@pressure /= 2.71828182845905
      	@tangent /= 2.71828182845905
      	@altitude += #$scaleHeight$
      	MM_PATCH_LOOP {}
      }
      @pressureCurve:HAS[#pressure[>0],#scaleHeight[>0]]
      {
      	key = #$altitude$ 0 0 0
      	!scaleHeight = DEL
      	!pressure = DEL
      	!altitude = DEL
      	!tangent = DEL
      }
    }
  }
}
